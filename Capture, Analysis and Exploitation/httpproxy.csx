//simple http proxy
using static System.Console;
using static CANAPE.Cli.ConsoleUtils;

//Create proxy template
var template = new HttpProxyTemplate();
template.LocalPort = LOCALPORT;

//create proxy instance and start
var service = template.Create();
service.Start();

WriteLine("Created {0}", service);
WriteLine("Press enter to exit..");
ReadLine();
service.Stop();

//Dump packets
var packets = service.Packets;
WriteLine("Captued {0} Packets", packets.Count);
WritePackets(packets);